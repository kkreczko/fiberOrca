name: workflow.yml

on: push
#  pull_request:
#    types:
#      - closed


jobs:
  build-backend:
    runs-on: ubuntu-latest
    steps:
      - name: backend
        run: |
          echo "building backend"

  build-frontend:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-go@v5
        with:
          go-version: 1.23.4
      - run: go version
      - run: go mod tidy
        working-directory: frontend
      - run: go build -o ../release/fiberOrca *.go
        working-directory: frontend
      - run: |
          git config --local user.email "github_action@github.com"
          git config --local user.name "GitHub Action Bot"
          git add release/fiberOrca
          git commit -m "chore: add frontend binary"
      - uses: ad-m/github-push-action@master
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          branch: release
          force_with_lease: true


